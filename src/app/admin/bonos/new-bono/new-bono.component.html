<div class="fw-bold d-flex justify-content-around" style="margin: 20px;">
    <h2>DATOS DEL BONO</h2>
    <h2>DATOS DE COSTES</h2>
</div>

<div class="row">
    <form #CreateForm="ngForm">
      <div class="row">
        <div class="col">
          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Valor Nominal</mat-label>
              <input
                matInput
                type="number"
                placeholder="Valor Nominal"
                [(ngModel)]="bono.VN"
                name="VN"
                #VN="ngModel"
                required
              />
        
              <mat-error *ngIf="VN.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Valor Comercial</mat-label>
              <input
                matInput
                type="number"
                placeholder="Valor Comercial"
                [(ngModel)]="bono.VC"
                name="VC"
                #VC="ngModel"
                required
              />
        
              <mat-error *ngIf="VC.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Nº de Años</mat-label>
              <input
                matInput
                type="number"
                placeholder="Nº de Años"
                [(ngModel)]="bono.Anios"
                name="Anios"
                #Anios="ngModel"
                required
              />
        
              <mat-error *ngIf="Anios.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>
      
          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Frecuencia Cupón</mat-label>
              <mat-select name="Periodo_Cupon_id" [(ngModel)]="bono.Periodo_Cupon_id" #Periodo_Cupon_id="ngModel" required>
                <div *ngFor = "let frecuencia of frecuencias">
                  <mat-option [value]="frecuencia.id">{{frecuencia.nombre}}</mat-option>
                </div>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Dias x Año</mat-label>
              <input
                matInput
                type="number"
                placeholder="Dias x Año"
                [(ngModel)]="bono.DXA"
                name="DXA"
                #DXA="ngModel"
                required
              />
        
              <mat-error *ngIf="DXA.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Tipo de Tasa de Interes</mat-label>
              <mat-select name="Tipo_Tasa" [(ngModel)]="bono.Tipo_Tasa" #Tipo_Tasa="ngModel" required>
                <mat-option value="Nominal">Tasa Nominal</mat-option>
                <mat-option value="Efectiva">Tasa Efectiva</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Capitalización</mat-label>
              <mat-select name="Periodo_Capitalizacion_id" [(ngModel)]="bono.Periodo_Capitalizacion_id" #Periodo_Capitalizacion_id="ngModel" required>
                <div *ngFor = "let frecuencia of frecuencias">
                  <mat-option [value]="frecuencia.id">{{frecuencia.nombre}}</mat-option>
                </div>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Tasa de Interés</mat-label>
              <input
                matInput
                type="number"
                placeholder="Tasa de Interés"
                [(ngModel)]="bono.P_Tasa_Interes"
                name="P_Tasa_Interes"
                #P_Tasa_Interes="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Tasa_Interes.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Tasa Anual de Descuento</mat-label>
              <input
                matInput
                type="number"
                placeholder="Tasa Anual de Descuento"
                [(ngModel)]="bono.P_Tasa_Anual_Descuento"
                name="P_Tasa_Anual_Descuento"
                #P_Tasa_Anual_Descuento="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Tasa_Anual_Descuento.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Impuesto a la Renta</mat-label>
              <input
                matInput
                type="number"
                placeholder="Impuesto a la Renta"
                [(ngModel)]="bono.P_Impuesto"
                name="P_Impuesto"
                #P_Impuesto="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Impuesto.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center date-box">
            <mat-form-field class="date-box-date linea" appearance="outline">
                <mat-label>Fecha de Emision</mat-label>
                <input matInput
                    type="date"
                    placeholder="Fecha de Emision"
                    [(ngModel)]="bono.Emision"
                    name = "Emision"
                    #Emision="ngModel"
                    required
                >
                <mat-error *ngIf="Emision.hasError('required')">
                    Este campo es obligatorio
                </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Nombre</mat-label>
              <input matInput
                  type="text"
                  placeholder="Nombre"
                  [(ngModel)]="bono.Nombre"
                  name = "Nombre"
                  #Nombre="ngModel"
                  required
              >
              <mat-error *ngIf="Nombre.hasError('required')">
                  Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>Importancia</mat-label>
              <input
                matInput
                type="number"
                placeholder="Impuesto a la Renta"
                [(ngModel)]="bono.Importancia"
                name="Importancia"
                #Importancia="ngModel"
                required
              />
        
              <mat-error *ngIf="Importancia.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <button mat-raised-button type="button" (click)="crearBono()" color="primary" class="botones_finales" [disabled]="CreateForm.invalid">
              GUARDAR
            </button>
          </div>

          <div class="espacio_final">

          </div>
        </div>

        <div class="col justify-content-center">
          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>%Prima</mat-label>
              <input
                matInput
                type="number"
                placeholder="%Prima"
                name="P_Prima"
                [(ngModel)]="bono.P_Prima"
                #P_Prima="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Prima.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>%Estructuracion</mat-label>
              <input
                matInput
                type="number"
                placeholder="%Estructuracion"
                name="P_Estructuracion"
                [(ngModel)]="bono.P_Estructuracion"
                #P_Estructuracion="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Estructuracion.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>%Colocación</mat-label>
              <input
                matInput
                type="number"
                placeholder="%Colocacion"
                name="P_Colocacion"
                [(ngModel)]="bono.P_Colocacion"
                #P_Colocacion="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Colocacion.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>%Flotacion</mat-label>
              <input
                matInput
                type="number"
                placeholder="%Flotacion"
                name="P_Flotacion"
                [(ngModel)]="bono.P_Flotacion"
                #P_Flotacion="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Flotacion.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <mat-form-field appearance="outline" class="linea">
              <mat-label>%CAVALI</mat-label>
              <input
                matInput
                type="number"
                placeholder="%CAVALI"
                name="P_Cavali"
                [(ngModel)]="bono.P_Cavali"
                #P_Cavali="ngModel"
                required
              />
        
              <mat-error *ngIf="P_Cavali.hasError('required')">
                Este campo es obligatorio
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex justify-content-center">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 linea">
              <!-- Año Column -->
              <ng-container matColumnDef="Año">
                <th mat-header-cell *matHeaderCellDef> Año </th>
                <td mat-cell *matCellDef="let element"> {{element.Anio}} </td>
              </ng-container>

              <!-- Inflación Column -->
              <ng-container matColumnDef="Inflación">
                <th mat-header-cell *matHeaderCellDef> Inflación </th>
                <td mat-cell *matCellDef="let element"> {{element.Inflacion}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>

          <div class="d-flex justify-content-center">
            <button mat-raised-button type="button" (click)="agregarInflacion()" color="primary" class="botones">
              AGREGAR INFLACIÓN
            </button>

            <div class="area_botones">

            </div>

            <button mat-raised-button type="button" (click)="eliminarInflacion()" color="primary" class="botones" [disabled]="verif()">
              ELIMINAR INFLACIÓN
            </button>
          </div>
        </div>
      </div>
    </form>
</div>

